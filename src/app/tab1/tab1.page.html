<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Buscar Anime</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Descripción del Tab -->
  <ion-card>
    <ion-card-content>
      <p>
        Bienvenido a “Buscar Anime”. Aquí puedes escribir el nombre de tu anime favorito y descubrir información detallada,
        episodios, puntuación y sinopsis usando la API de <strong>MyAnimeList</strong>.
      </p>
      <p>También puedes explorar algunos animes populares por defecto.</p>
    </ion-card-content>
  </ion-card>

  <!-- Input con ícono -->
  <ion-item>
    <ion-icon name="search-outline" slot="start"></ion-icon>
    <ion-input
      [formControl]="searchControl"
      placeholder="Escribe el nombre del anime">
    </ion-input>
  </ion-item>

  <!-- Spinner centrado -->
  <div *ngIf="loading" class="center-spinner">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Buscando animes...</p>
  </div>

  <!-- Mensaje de error -->
  <ion-text color="danger" *ngIf="error" class="ion-padding">{{ error }}</ion-text>

  <!-- Resultados -->
  <ion-grid *ngIf="!loading && animes.length > 0">
    <ion-row>
      <ion-col size="12" size-md="6" size-lg="4" *ngFor="let anime of animes">
        <ion-card class="anime-card">
          <img [src]="anime.image_url" alt="Imagen del anime">
          <ion-card-header>
            <ion-card-title>{{ anime.title }}</ion-card-title>
          </ion-card-header>
          <ion-card-content style="margin: 10px;">
            <p><strong>Episodios:</strong> {{ anime.episodes || 'N/A' }}</p>
            <p><strong>Puntaje:</strong> {{ anime.score || 'Sin calificación' }}</p>
            <p>{{ anime.synopsis || 'Sin descripción disponible.' }}</p>
            <ion-button fill="outline" size="small" expand="block" [href]="anime.url" target="_blank">
              Ver en MyAnimeList
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Mensaje cuando no hay resultados -->
  <div *ngIf="!loading && animes.length === 0 && searchControl.value?.trim()">
    <ion-text color="medium">No se encontraron resultados para "{{ searchControl.value }}"</ion-text>
  </div>

</ion-content>
